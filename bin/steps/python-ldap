# Install python-ldap
puts-step "Installing python-ldap"

GROFF_VERSION=1.21
GROFF_URL=ftp://ftp.gnu.org/gnu/groff/groff-${GROFF_VERSION}.tar.gz

BERKLEY_DB_VERSION=5.3.15
BERKLEY_DB_URL=http://download.oracle.com/berkeley-db/db-${BERKLEY_DB_VERSION}.NC.tar.gz

OPENLDAP_VERSION=2.4.40
OPENLDAP_URL=http://www.openldap.org/software/download/OpenLDAP/openldap-release/openldap-${OPENLDAP_VERSION}.tgz

mkdir -p $CACHE_DIR/.python-ldap
mkdir -p $BUILD_DIR/.python-ldap


apt-get install libldap2-dev

echo "Installing python-ldap ..." | indent
PYTHON_LDAP_VERSION=`cat requirements.txt | grep python-ldap | awk -F '=' '{ print $3 }'`

mkdir tmpdir
if [ -n "$PYTHON_LDAP_VERSION" ]; then
    pip install -d tmpdir python-ldap==${PYTHON_LDAP_VERSION}
else
    pip install -d tmpdir python-ldap
    PYTHON_LDAP_VERSION=`ls tmpdir | grep python-ldap | sed 's/python-ldap-\(.*\)\.tar\.gz/\1/g'`
fi

cd tmpdir
tar -zxvf python-ldap-${PYTHON_LDAP_VERSION}.tar.gz > /dev/null
cd python-ldap-${PYTHON_LDAP_VERSION}
pip install .
cd ../..
rm -rf tmpdir




